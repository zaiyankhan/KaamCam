<?xml version='1.0' encoding='utf-8'?>
<widget id="com.kaamcam.app" version="1.0.0" xmlns="http://www.w3.org/ns/widgets" xmlns:cdv="http://cordova.apache.org/ns/1.0">
    <name>KaamCam</name>
    <description>Mobile-first field documentation and project coordination platform for construction and service companies</description>
    <author email="support@kaamcam.com" href="https://kaamcam.com">KaamCam Team</author>
    
    <content src="index.html" />
    
    <access origin="*" />
    <allow-intent href="http://*/*" />
    <allow-intent href="https://*/*" />
    <allow-intent href="tel:*" />
    <allow-intent href="sms:*" />
    <allow-intent href="mailto:*" />
    <allow-intent href="geo:*" />
    
    <preference name="DisallowOverscroll" value="true" />
    <preference name="StatusBarOverlaysWebView" value="false" />
    <preference name="StatusBarBackgroundColor" value="#10B981" />
    <preference name="StatusBarStyle" value="lightcontent" />
    <preference name="Orientation" value="portrait" />
    <preference name="SplashScreenDelay" value="3000" />
    <preference name="FadeSplashScreen" value="true" />
    <preference name="FadeSplashScreenDuration" value="300" />
    <preference name="ShowSplashScreenSpinner" value="false" />
    <preference name="BackgroundColor" value="0xff10B981" />
    <preference name="AllowInlineMediaPlayback" value="true" />
    <preference name="MediaPlaybackRequiresUserAction" value="false" />
    
    <!-- Android Preferences -->
    <platform name="android">
        <preference name="android-minSdkVersion" value="24" />
        <preference name="android-targetSdkVersion" value="34" />
        <preference name="AndroidPersistentFileLocation" value="Compatibility" />
        <preference name="AndroidExtraFilesystems" value="files,cache,sdcard" />
        <preference name="AndroidLaunchMode" value="singleTop" />
        <preference name="GradlePluginKotlinEnabled" value="true" />
        <preference name="GradlePluginKotlinCodeStyle" value="official" />
        
        <icon src="res/android/icon-ldpi.png" density="ldpi" />
        <icon src="res/android/icon-mdpi.png" density="mdpi" />
        <icon src="res/android/icon-hdpi.png" density="hdpi" />
        <icon src="res/android/icon-xhdpi.png" density="xhdpi" />
        <icon src="res/android/icon-xxhdpi.png" density="xxhdpi" />
        <icon src="res/android/icon-xxxhdpi.png" density="xxxhdpi" />
        
        <splash src="res/android/screen-ldpi-portrait.png" density="port-ldpi" />
        <splash src="res/android/screen-mdpi-portrait.png" density="port-mdpi" />
        <splash src="res/android/screen-hdpi-portrait.png" density="port-hdpi" />
        <splash src="res/android/screen-xhdpi-portrait.png" density="port-xhdpi" />
        <splash src="res/android/screen-xxhdpi-portrait.png" density="port-xxhdpi" />
        <splash src="res/android/screen-xxxhdpi-portrait.png" density="port-xxxhdpi" />
        
        <config-file parent="/manifest" target="AndroidManifest.xml">
            <uses-permission android:name="android.permission.CAMERA" />
            <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
            <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
            <uses-permission android:name="android.permission.ACCESS_BACKGROUND_LOCATION" />
            <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" android:maxSdkVersion="32" />
            <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" android:maxSdkVersion="32" />
            <uses-permission android:name="android.permission.READ_MEDIA_IMAGES" />
            <uses-permission android:name="android.permission.READ_MEDIA_VIDEO" />
            <uses-permission android:name="android.permission.INTERNET" />
            <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
            <uses-permission android:name="android.permission.VIBRATE" />
            <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
            <uses-permission android:name="android.permission.WAKE_LOCK" />
            <uses-permission android:name="android.permission.POST_NOTIFICATIONS" />
            <uses-permission android:name="android.permission.RECORD_AUDIO" />
            <uses-feature android:name="android.hardware.camera" android:required="true" />
            <uses-feature android:name="android.hardware.camera.autofocus" android:required="false" />
            <uses-feature android:name="android.hardware.location.gps" android:required="true" />
        </config-file>
        
        <config-file parent="/manifest/application" target="AndroidManifest.xml">
            <meta-data android:name="com.google.firebase.messaging.default_notification_icon" android:resource="@mipmap/ic_launcher" />
            <meta-data android:name="com.google.firebase.messaging.default_notification_color" android:resource="@color/colorAccent" />
            <meta-data android:name="com.google.firebase.messaging.default_notification_channel_id" android:value="default" />
        </config-file>
    </platform>
    
    <!-- iOS Preferences -->
    <platform name="ios">
        <preference name="deployment-target" value="13.0" />
        <preference name="target-device" value="universal" />
        <preference name="WKWebViewOnly" value="true" />
        <preference name="CordovaWebViewEngine" value="CDVWKWebViewEngine" />
        <preference name="WKSuspendInBackground" value="false" />
        <preference name="KeyboardDisplayRequiresUserAction" value="false" />
        
        <icon src="res/ios/icon-20.png" width="20" height="20" />
        <icon src="res/ios/icon-20@2x.png" width="40" height="40" />
        <icon src="res/ios/icon-20@3x.png" width="60" height="60" />
        <icon src="res/ios/icon-29.png" width="29" height="29" />
        <icon src="res/ios/icon-29@2x.png" width="58" height="58" />
        <icon src="res/ios/icon-29@3x.png" width="87" height="87" />
        <icon src="res/ios/icon-40.png" width="40" height="40" />
        <icon src="res/ios/icon-40@2x.png" width="80" height="80" />
        <icon src="res/ios/icon-40@3x.png" width="120" height="120" />
        <icon src="res/ios/icon-60@2x.png" width="120" height="120" />
        <icon src="res/ios/icon-60@3x.png" width="180" height="180" />
        <icon src="res/ios/icon-76.png" width="76" height="76" />
        <icon src="res/ios/icon-76@2x.png" width="152" height="152" />
        <icon src="res/ios/icon-83.5@2x.png" width="167" height="167" />
        <icon src="res/ios/icon-1024.png" width="1024" height="1024" />
        
        <splash src="res/ios/Default@2x~universal~anyany.png" />
        
        <config-file parent="NSCameraUsageDescription" target="*-Info.plist">
            <string>KaamCam needs camera access to take photos of your job sites and document your work progress.</string>
        </config-file>
        <config-file parent="NSPhotoLibraryUsageDescription" target="*-Info.plist">
            <string>KaamCam needs photo library access to upload existing photos to your job documentation.</string>
        </config-file>
        <config-file parent="NSPhotoLibraryAddUsageDescription" target="*-Info.plist">
            <string>KaamCam needs permission to save photos to your camera roll.</string>
        </config-file>
        <config-file parent="NSLocationWhenInUseUsageDescription" target="*-Info.plist">
            <string>KaamCam needs location access to geo-tag photos and track job site locations.</string>
        </config-file>
        <config-file parent="NSLocationAlwaysAndWhenInUseUsageDescription" target="*-Info.plist">
            <string>KaamCam needs location access to geo-tag photos and track job site locations even when in the background.</string>
        </config-file>
        <config-file parent="NSMicrophoneUsageDescription" target="*-Info.plist">
            <string>KaamCam needs microphone access to record audio notes and videos.</string>
        </config-file>
        <config-file parent="UIBackgroundModes" target="*-Info.plist">
            <array>
                <string>fetch</string>
                <string>remote-notification</string>
            </array>
        </config-file>
    </platform>
    
    <!-- Required Cordova Plugins -->
    <!-- Install with: cordova plugin add [plugin-name] -->
    <!--
    Essential plugins:
    - cordova-plugin-device
    - cordova-plugin-camera
    - cordova-plugin-geolocation
    - cordova-plugin-file
    - cordova-plugin-network-information
    - cordova-plugin-statusbar
    - cordova-plugin-splashscreen
    - cordova-plugin-media-capture
    - cordova-plugin-inappbrowser
    - cordova-plugin-whitelist
    - phonegap-plugin-push
    
    Install command:
    cordova plugin add cordova-plugin-device cordova-plugin-camera cordova-plugin-geolocation cordova-plugin-file cordova-plugin-network-information cordova-plugin-statusbar cordova-plugin-splashscreen cordova-plugin-media-capture cordova-plugin-inappbrowser cordova-plugin-whitelist phonegap-plugin-push
    -->
    
    <plugin name="cordova-plugin-device" spec="^2.1.0" />
    <plugin name="cordova-plugin-camera" spec="^7.0.0" />
    <plugin name="cordova-plugin-geolocation" spec="^5.0.0" />
    <plugin name="cordova-plugin-file" spec="^8.0.1" />
    <plugin name="cordova-plugin-network-information" spec="^3.0.0" />
    <plugin name="cordova-plugin-statusbar" spec="^4.0.0" />
    <plugin name="cordova-plugin-splashscreen" spec="^6.0.2" />
    <plugin name="cordova-plugin-media-capture" spec="^5.0.0" />
    <plugin name="cordova-plugin-inappbrowser" spec="^6.0.0" />
    <plugin name="cordova-plugin-whitelist" spec="^1.3.5" />
    <plugin name="phonegap-plugin-push" spec="^2.3.0">
        <variable name="ANDROID_SUPPORT_V13_VERSION" value="28.0.0" />
        <variable name="FCM_VERSION" value="23.0.6" />
    </plugin>
    
    <engine name="android" spec="^12.0.0" />
    <engine name="ios" spec="^7.0.0" />
</widget>
